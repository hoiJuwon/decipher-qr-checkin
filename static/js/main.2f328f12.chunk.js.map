{"version":3,"sources":["pages/Participant.js","pages/Admin.js","App.js","reportWebVitals.js","index.js"],"names":["setIdToLocalStorage","id","uuidv4","window","localStorage","setItem","getUserNameFromLocalStorage","getItem","getIdFromLocalStorage","Container","styled","div","InfoWrapper","NameWrapper","QRContainer","RegisterBtn","button","Participant","useState","isNameRegistered","setIsNameRegistered","userName","inputs","setInputs","isQRGenerated","setIsQRGenerated","qrData","setQrData","useEffect","length","generateQrHandler","data","JSON","stringify","placeholder","onChange","e","target","value","name","type","onClick","setUserNameToLocalStorage","fgColor","bgColor","clear","Page","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"2QAaMA,EAAsB,WAC1B,IAAMC,EAAKC,cACXC,OAAOC,aAAaC,QAAQ,KAAMJ,IAG9BK,EAA8B,WAClC,OAAOH,OAAOC,aAAaG,QAAQ,aAG/BC,EAAwB,WAC5B,OAAOL,OAAOC,aAAaG,QAAQ,OAG/BE,EAAYC,IAAOC,IAAV,+JASTC,EAAcF,IAAOC,IAAV,oZAyBXE,EAAcH,IAAOC,IAAV,wwBAyCXG,EAAcJ,IAAOC,IAAV,wPAaXI,EAAcL,IAAOM,OAAV,+LA4IFC,MAjIf,WACE,MAAgDC,oBAAS,GAAzD,mBAAOC,EAAP,KAAyBC,EAAzB,KACA,EAA4BF,mBAAS,CACnCG,SAAU,KADZ,mBAAOC,EAAP,KAAeC,EAAf,KAGA,EAA0CL,oBAAS,GAAnD,mBAAOM,EAAP,KAAsBC,EAAtB,KACA,EAA4BP,mBAAS,IAArC,mBAAOQ,EAAP,KAAeC,EAAf,KAEQN,EAAaC,EAAbD,SAERO,qBAAU,WACR,IAAMP,EAAWf,IACXL,EAAKO,IACNP,GAAoB,IAAdA,EAAG4B,QACZ7B,IAEEqB,GAAgC,IAApBA,EAASQ,QAAgB5B,GAAoB,IAAdA,EAAG4B,SAChDT,GAAoB,kBAAM,KAC1BU,OAGD,IAgCH,IAQMA,EAAoB,WAExB,IAAMT,EAAWf,IACbL,EAAKO,IACJP,GAAoB,IAAdA,EAAG4B,QACZ7B,IAGF,IAAM+B,EAAO,CACX9B,GAFFA,EAAKO,IAGHa,SAAUA,GAEZM,GAAU,kBAAMK,KAAKC,UAAUF,MAC/BN,GAAiB,kBAAM,MAoBzB,OACE,eAAChB,EAAD,WACE,eAACG,EAAD,WACE,gFACA,6DACA,kHACA,sKAEAO,GACA,eAACN,EAAD,WACE,uBACEqB,YAAY,oDACZC,SArDO,SAACC,GAChB,MAAwBA,EAAEC,OAAlBC,EAAR,EAAQA,MAAOC,EAAf,EAAeA,KACfhB,EAAU,2BACLD,GADI,kBAENiB,EAAOD,MAkDFA,MAAOjB,EACPkB,KAAK,aAEP,wBAAQC,KAAK,SAASC,QAjCL,WACvBlB,EAAU,2BACLD,GADI,IAEPD,SAAU,MApMkB,SAACA,GACjClB,OAAOC,aAAaC,QAAQ,WAAYgB,GAqMtCqB,CAA0BrB,GAC1BD,GAAoB,kBAAM,KAC1BU,KA0BM,yCAKHN,GACC,qCACE,cAACV,EAAD,UACE,cAAC,IAAD,CAAQwB,MAAOZ,EAAQiB,QAAQ,UAAUC,QAAQ,kBAEnD,cAAC7B,EAAD,CAAa0B,QAjCC,WACpBtC,OAAOC,aAAayC,QACpBzB,GAAoB,kBAAM,KAC1BK,GAAiB,kBAAM,KACvBE,GAAU,iBAAM,OA6B2Ba,KAAK,SAA1C,gE,uBCrMKM,I,EC3CTrC,EAAYC,IAAOC,IAAV,+GAeAoC,MARf,WACE,OACE,cAAC,EAAD,UACE,cAAC,EAAD,OCHSC,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCFdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1Bb,M","file":"static/js/main.2f328f12.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport QRCode from \"react-qr-code\";\n// import { GoogleSpreadsheet } from \"google-spreadsheet\";\n// import creds from \"../data/.key.js\";\n\nimport { v4 as uuidv4 } from \"uuid\";\nimport styled from \"styled-components\";\n\n/* here goes util function, too lazy to export and make it module.... */\nconst setUserNameToLocalStorage = (userName) => {\n  window.localStorage.setItem(\"userName\", userName);\n};\n\nconst setIdToLocalStorage = () => {\n  const id = uuidv4();\n  window.localStorage.setItem(\"id\", id);\n};\n\nconst getUserNameFromLocalStorage = () => {\n  return window.localStorage.getItem(\"userName\");\n};\n\nconst getIdFromLocalStorage = () => {\n  return window.localStorage.getItem(\"id\");\n};\n\nconst Container = styled.div`\n  margin: 0 auto;\n  width: 85%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n`;\n\nconst InfoWrapper = styled.div`\n  margin-top: 100px;\n  margin-bottom: 30px;\n  width: 85%;\n  h1 {\n    font-size: 28px;\n    font-weight: bold;\n    color: white;\n    text-align: left;\n  }\n  h2 {\n    font-size: 18px;\n    font-weight: 400;\n    opacity: 0.7;\n    color: white;\n    text-align: left;\n  }\n  p {\n    font-size: 12px;\n    opacity: 0.7;\n    color: white;\n    text-align: left;\n  }\n`;\n\nconst NameWrapper = styled.div`\n  margin-top: 100px;\n  width: 85%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n\n  input {\n    outline: none;\n    color: white;\n    border: 1px solid white;\n    border-radius: 3px;\n    background: transparent;\n    width: 95%;\n    padding-left: 10px;\n    height: 47px;\n    font-size: 18px;\n    margin-bottom: 40px;\n  }\n  ::placeholder {\n    opacity: 0.7;\n    padding-left: 10px;\n    font-size: 18px;\n  }\n\n  button {\n    border: none;\n    border-radius: 3px;\n    color: white;\n    background-color: #00244e;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-weight: bold;\n    font-size: 23px;\n    width: 100%;\n    height: 63px;\n  }\n`;\n\nconst QRContainer = styled.div`\n  border-radius: 10px;\n  background-color: #00244e;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 0 auto;\n  width: 300px;\n  height: 300px;\n  padding: 10px;\n  margin-bottom: 30px;\n`;\n\nconst RegisterBtn = styled.button`\n  color: white;\n  font-size: 18px;\n  font-weight: 600;\n  width: 180px;\n  height: 45px;\n  border-radius: 35px;\n  background-color: #00244e;\n  border: none;\n`;\n\nfunction Participant() {\n  const [isNameRegistered, setIsNameRegistered] = useState(false);\n  const [inputs, setInputs] = useState({\n    userName: \"\",\n  });\n  const [isQRGenerated, setIsQRGenerated] = useState(false);\n  const [qrData, setQrData] = useState(\"\");\n\n  const { userName } = inputs;\n\n  useEffect(() => {\n    const userName = getUserNameFromLocalStorage();\n    const id = getIdFromLocalStorage();\n    if (!id || id.length === 0) {\n      setIdToLocalStorage();\n    }\n    if (userName && userName.length !== 0 && id && id.length !== 0) {\n      setIsNameRegistered(() => true);\n      generateQrHandler();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  /*\n  async function registerUserNameToSheet() {\n    const userName = getUserNameFromLocalStorage();\n    const doc = new GoogleSpreadsheet(\n      \"1RtyZo6XUet4WWiH6kneedOonu1pmjPe_sNisnHgZOaQ\"\n    );\n    console.log(creds);\n    await doc.useServiceAccountAuth(creds);\n    await doc.loadInfo();\n\n    const date = new Date();\n    const sheetName = `${date.getFullYear()}-${date.getMonth() + 1}-${\n      date.getDay() + 1\n    }`;\n    let sheet = null;\n\n    if (doc.sheetsByTitle[sheetName] === undefined) {\n      sheet = await doc.addSheet({\n        title: sheetName,\n        headerValues: [\"name\", \"date\"],\n      });\n    } else {\n      sheet = doc.sheetsByTitle[sheetName];\n    }\n\n    const result = await sheet.addRow({ name: userName, date: new Date() });\n    console.log(result);\n  }\n  */\n\n  const onChange = (e) => {\n    const { value, name } = e.target;\n    setInputs({\n      ...inputs,\n      [name]: value,\n    });\n  };\n\n  const generateQrHandler = () => {\n    // TODO : generateQr with userName\n    const userName = getUserNameFromLocalStorage();\n    let id = getIdFromLocalStorage();\n    if (!id || id.length === 0) {\n      setIdToLocalStorage();\n    }\n    id = getIdFromLocalStorage();\n    const data = {\n      id: id,\n      userName: userName,\n    };\n    setQrData(() => JSON.stringify(data));\n    setIsQRGenerated(() => true);\n  };\n\n  const registerUserName = () => {\n    setInputs({\n      ...inputs,\n      userName: \"\",\n    });\n    setUserNameToLocalStorage(userName);\n    setIsNameRegistered(() => true);\n    generateQrHandler();\n  };\n\n  const clearUserName = () => {\n    window.localStorage.clear();\n    setIsNameRegistered(() => false);\n    setIsQRGenerated(() => false);\n    setQrData(() => \"\");\n  };\n\n  return (\n    <Container>\n      <InfoWrapper>\n        <h1>디사이퍼 QR 체크인</h1>\n        <h2>1. 이름등록</h2>\n        <h2>2. 현장에서 운영진에게 QR 체크인</h2>\n        <p>* 브라우저 캐시 삭제 시 이름을 재등록 해야합니다.</p>\n      </InfoWrapper>\n      {!isNameRegistered && (\n        <NameWrapper>\n          <input\n            placeholder=\"이름을 입력하세요\"\n            onChange={onChange}\n            value={userName}\n            name=\"userName\"\n          />\n          <button type=\"submit\" onClick={registerUserName}>\n            등록하기\n          </button>\n        </NameWrapper>\n      )}\n      {isQRGenerated && (\n        <>\n          <QRContainer>\n            <QRCode value={qrData} fgColor=\"#FFFFFF\" bgColor=\"transparent\" />\n          </QRContainer>\n          <RegisterBtn onClick={clearUserName} type=\"submit\">\n            이름 재등록하기\n          </RegisterBtn>\n        </>\n      )}\n    </Container>\n  );\n}\n\nexport default Participant;\n","import React from \"react\";\n\nimport { Html5Qrcode } from \"html5-qrcode\";\n\nfunction Page() {\n  const scanHandler = async () => {\n    const constraints = {\n      video: true,\n    };\n    navigator.permissions\n      .query({ name: \"camera\" })\n      .then((permissionObj) => {\n        console.log(permissionObj.state);\n      })\n      .catch((error) => {\n        console.log(\"Got error :\", error);\n      });\n\n    try {\n      let stream = await navigator.mediaDevices.getUserMedia(constraints);\n      console.log(stream);\n      /* use the stream */\n      const html5QrCode = new Html5Qrcode(\"reader\");\n      const qrCodeSuccessCallback = (decodedText, decodedResult) => {\n        /* handle success */\n        console.log(decodedText, decodedResult);\n        alert(\"출석!\");\n      };\n      const config = { fps: 900, qrbox: { width: 250, height: 250 } };\n\n      html5QrCode.start(\n        { facingMode: \"environment\" },\n        config,\n        qrCodeSuccessCallback\n      );\n    } catch (err) {\n      /* handle the error */\n    }\n  };\n  return (\n    <>\n      <div>admin page</div>\n      <button onClick={scanHandler}>scan</button>\n      <div id=\"reader\" width=\"600px\"></div>\n    </>\n  );\n}\n\nexport default Page;\n","import { Participant, Admin } from \"./pages\";\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport \"./App.css\";\n\nconst Container = styled.div`\n  margin: 0 auto;\n  height: 100vh;\n  width: 100%;\n  background-color: #001731;\n`;\n\nfunction App() {\n  return (\n    <Container>\n      <Participant />\n    </Container>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}